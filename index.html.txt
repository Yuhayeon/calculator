<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>4조 2교대 연차자동계산기</title>
  <style>
    table, th, td { border:1px solid #aaa; border-collapse:collapse; padding:8px }
    input[type="text"], select { width:70px; }
    th { background:#ffeeac }
    .center { text-align:center }
    .highlight { background:#ffd7d7 }
  </style>
</head>
<body>
  <h2>연차개수 자동계산 VER4</h2>
  <table id="scheduleTable">
    <tr>
      <th>근무</th>
      <th>주간</th>
      <th>야간</th>
      <th>비번</th>
      <th>휴무</th>
      <th>근무<br>(입력)</th>
      <th>주간</th>
      <th>야간</th>
    </tr>
    <!-- 샘플 입력 행 -->
    <tr>
      <td>입력</td>
      <td><input type="text" value="주"></td>
      <td><input type="text" value="야"></td>
      <td><input type="text" value="비"></td>
      <td><input type="text" value="휴"></td>
      <td><select><option>선택</option><option>주</option><option>야</option><option>비</option><option>휴</option></select></td>
      <td><input type="text" value=""></td>
      <td><input type="text" value=""></td>
    </tr>
    <!-- 행 복사하여 추가 입력 가능 -->
  </table>
  <br>
  <button onclick="calculate()">연차 자동 계산</button>
  <div style="margin-top:15px;">
    <span class="highlight">연차 수: <span id="totalAnnual">0</span>개</span>
  </div>
  <ol>
    <li>근무 종류를 수정 후 <b>연차 자동 계산</b> 버튼 클릭</li>
    <li>비번/연차 등 규칙을 바꿔 결과 확인</li>
  </ol>

  <script>
    function calculate() {
      let table = document.getElementById('scheduleTable');
      let rows = table.rows;
      let totalAnnual = 0;

      for (let i=1; i<rows.length; i++) {
        let inputs = rows[i].querySelectorAll("input, select");
        let data = [];
        for (let j=0; j<inputs.length; j++) {
          data.push(inputs[j].value.trim());
        }

        // 예시 규칙: '주'와 '야' 연속 선택 시 연차 2개, '야' - '비'-'휴' 사이면 연차 3개
        let deduct = 0;
        if (data[0]==="주" && data[1]==="야") deduct = 2;
        else if (data[1]==="야" && data[2]==="비" && data[3]==="휴") deduct = 3;
        // 필요 시 규칙 추가

        totalAnnual += deduct;
      }
      document.getElementById('totalAnnual').innerText = totalAnnual;
    }
  </script>
</body>
</html>
